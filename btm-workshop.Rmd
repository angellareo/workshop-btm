---
title: "Building a DIY BtM Datalogger for Moss & Lichen Water Monitoring"
author: "Ángel Lareo, María Leo & Nagore G. Medina"
date: "`r Sys.Date()`"
output: html_document
runtime: shiny
---

---
title: "Workshop Preparation Instructions"
output: html_document
---

# Preparation Requirements for the Workshop

To ensure a smooth and productive experience during the workshop, please prepare the following items **in advance**:
- **Computer**: Please bring a laptop. Make sure your device has USB ports and administrative permissions to install software.
- **Arduino IDE**: We will be using the Arduino 2 IDE. Please install it in advance by following these steps:
  - 1. Go to the [official Arduino IDE 2 download page](https://www.arduino.cc/en/software):  
  - 2. Download the installer for your operating system.
  - 3. Follow the installation instructions specific to your platform:
      - 3.1 Linux
      - 3.2 Windows
      - 3.3 Mac
  - 4. Make sure the IDE launches correctly after installation. If you encounter any issues, consult the [installation guide provided by Arduino](https://docs.arduino.cc/software/ide-v2/tutorials/).

- The workshop will use a code repository hosted on GitHub. Please **download the repository in advance** in one of the following formats: [ZIP File](https://github.com/united-ecology/btmboard/archive/refs/heads/main.zip) or [GitHub Link](https://github.com/united-ecology/btmboard)
  - Make sure you get the contents (or extract them if you downloaded the ZIP) and browse the folder to verify that everything was downloaded correctly. **Remember the directory** you are using.

If you have any questions or need technical support before the workshop, feel free to contact us at: 

# 1. Why a BtM?

- **Problem to solve:**  Existing commercial solutions were expensive and did not fully meet our specific needs. They offered limited flexibility and closed architectures, which constrained our research applications.

- **Our approach: Free/Libre and Open Source Development**  
  We chose to develop our own solution using open hardware and open software.  
  **Advantages include:**
  - Lower cost
  - Transparency and reproducibility
  - Full adaptability to specific research needs
  - Collaborative improvement and customization

# 2. What is a BtM?

The BtM (Bryolichen Temperature Moisture board) is:
- A **datalogger** with:
  - A temperature/humidity sensor for ambient conditions
  - **8 activity detection channels** based on soil or plant water content

### How do we measure "activity"?

- **Water content–activity correlation:**  
  Biological activity is closely related to water content in soils and substrates.

- **Water content = Conductance:**  
  By measuring **electrical conductance**, we estimate water content, which serves as a proxy for activity.

- BtM includes both **software and hardware** components, all completely open and free.

#### Hardware Demonstration

- We will show the BtM device in both **field and laboratory** setups.  
  *(Include photo of the open BtM case)*

#### Software Demonstration

- We will explore the code used to operate and analyze data with the BtM.  

## 2.1 Hardware Details

### Printed Circuit Board (PCB)

- The BtM PCB can be (depending on budget and skills):
  - Assembled from scratch (DIY), or
  - Provided as a partially assembled board.
  
- Key Components

- How conductance is measured:
  - Based on *Ohm’s Law*: 
  - Relation between impedance (R) and conductance (C): \( G = \frac{1}{R} \)

### Additional Hardware (Beyond PCB)

- **Arduino Board** (serves as the microcontroller)
- **Temperature/Humidity Sensor:**  
  Two versions available; we will discuss the pros and cons of each, including a current issue with one of the sensor models.




<!-- ```{r setup, include=FALSE} -->
<!-- knitr::opts_chunk$set(echo = TRUE) -->
<!-- ``` -->

<!-- This R Markdown document is made interactive using Shiny. Unlike the more traditional workflow of creating static reports, you can now create documents that allow your readers to change the assumptions underlying your analysis and see the results immediately.  -->

<!-- To learn more, see [Interactive Documents](http://rmarkdown.rstudio.com/authoring_shiny.html). -->

<!-- ## Inputs and Outputs -->

<!-- You can embed Shiny inputs and outputs in your document. Outputs are automatically updated whenever inputs change.  This demonstrates how a standard R plot can be made interactive by wrapping it in the Shiny `renderPlot` function. The `selectInput` and `sliderInput` functions create the input widgets used to drive the plot. -->

<!-- ```{r eruptions, echo=FALSE} -->
<!-- inputPanel( -->
<!--   selectInput("n_breaks", label = "Number of bins:", -->
<!--               choices = c(10, 20, 35, 50), selected = 20), -->

<!--   sliderInput("bw_adjust", label = "Bandwidth adjustment:", -->
<!--               min = 0.2, max = 2, value = 1, step = 0.2) -->
<!-- ) -->

<!-- renderPlot({ -->
<!--   hist(faithful$eruptions, probability = TRUE, breaks = as.numeric(input$n_breaks), -->
<!--        xlab = "Duration (minutes)", main = "Geyser eruption duration") -->

<!--   dens <- density(faithful$eruptions, adjust = input$bw_adjust) -->
<!--   lines(dens, col = "blue") -->
<!-- }) -->
<!-- ``` -->

<!-- ## Embedded Application -->

<!-- It's also possible to embed an entire Shiny application within an R Markdown document using the `shinyAppDir` function. This example embeds a Shiny application located in another directory: -->

<!-- ```{r tabsets, echo=FALSE} -->
<!-- shinyAppDir( -->
<!--   system.file("examples/06_tabsets", package = "shiny"), -->
<!--   options = list( -->
<!--     width = "100%", height = 550 -->
<!--   ) -->
<!-- ) -->
<!-- ``` -->

<!-- Note the use of the `height` parameter to determine how much vertical space the embedded application should occupy. -->

<!-- You can also use the `shinyApp` function to define an application inline rather then in an external directory. -->

<!-- In all of R code chunks above the `echo = FALSE` attribute is used. This is to prevent the R code within the chunk from rendering in the document alongside the Shiny components. -->



